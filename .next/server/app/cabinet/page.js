(()=>{var e={};e.id=553,e.ids=[553],e.modules={440:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var r=a(1658);let s=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},833:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var r=a(687),s=a(3210);function n(){let[e,t]=(0,s.useState)({firstName:"",lastName:"",patronymic:"",phone:"",photo:""}),[a,n]=(0,s.useState)([{carBrand:"",vin:""}]),[i,o]=(0,s.useState)(""),l=e=>{let{name:a,value:r}=e.target;t(e=>({...e,[a]:r}))},c=(e,t,r)=>{let s=[...a];s[e][t]=r,n(s)},p=async r=>{let s=r.target.files?.[0];if(!s)return;let n=e.phone,i=new FormData;i.append("avatar",s),i.append("phone",n);let o=await fetch("/api/avatar",{method:"POST",body:i}),l=await o.json();l.avatar&&(t(e=>({...e,photo:l.avatar})),localStorage.setItem("userAvatar",l.avatar),localStorage.setItem(`userData-${n}`,JSON.stringify({...e,photo:l.avatar,cars:a})))},d=e=>{n(a.filter((t,a)=>a!==e))};return(0,r.jsx)("div",{className:"cabinet-container",children:(0,r.jsxs)("form",{className:"cabinet-form",onSubmit:t=>{t.preventDefault();let r=e.phone;if(r){let t={...e,cars:a};localStorage.setItem(`userData-${r}`,JSON.stringify(t)),e.photo&&localStorage.setItem("userAvatar",e.photo),o("Данные сохранены!"),setTimeout(()=>o(""),3e3)}},children:[(0,r.jsx)("h2",{children:"Личный кабинет"}),e.photo&&(0,r.jsx)("div",{className:"avatar-preview",children:(0,r.jsx)("img",{src:e.photo,alt:"Фото пользователя",className:"avatar-large"})}),(0,r.jsx)("label",{children:"Имя"}),(0,r.jsx)("input",{name:"firstName",value:e.firstName,onChange:l}),(0,r.jsx)("label",{children:"Фамилия"}),(0,r.jsx)("input",{name:"lastName",value:e.lastName,onChange:l}),(0,r.jsx)("label",{children:"Отчество"}),(0,r.jsx)("input",{name:"patronymic",value:e.patronymic,onChange:l}),(0,r.jsx)("label",{children:"Телефон"}),(0,r.jsx)("input",{name:"phone",value:e.phone,disabled:!0}),(0,r.jsx)("h3",{children:"Автомобили"}),a.map((e,t)=>(0,r.jsxs)("div",{className:"car-group",children:[(0,r.jsx)("label",{children:"Марка"}),(0,r.jsx)("input",{value:e.carBrand,onChange:e=>c(t,"carBrand",e.target.value)}),(0,r.jsx)("label",{children:"VIN номер"}),(0,r.jsx)("input",{value:e.vin,onChange:e=>c(t,"vin",e.target.value)}),a.length>1&&(0,r.jsx)("button",{type:"button",className:"remove-car-btn",onClick:()=>d(t),children:"Удалить автомобиль"})]},t)),(0,r.jsx)("button",{type:"button",className:"add-car-btn",onClick:()=>{n([...a,{carBrand:"",vin:""}])},children:"+ Добавить автомобиль"}),(0,r.jsx)("label",{children:"Фото"}),(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:p}),(0,r.jsxs)("div",{className:"button-wrapper",children:[(0,r.jsx)("button",{className:"save-button",type:"submit",children:"Сохранить"}),i&&(0,r.jsx)("p",{className:"saved-message",children:i})]})]})})}a(7718)},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1239:(e,t,a)=>{Promise.resolve().then(a.bind(a,2991))},1503:(e,t,a)=>{Promise.resolve().then(a.bind(a,833))},2830:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>d,pages:()=>p,routeModule:()=>u,tree:()=>c});var r=a(5239),s=a(8088),n=a(8170),i=a.n(n),o=a(893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);a.d(t,l);let c={children:["",{children:["cabinet",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,2991)),"D:\\Projects\\autoservice-diploma\\src\\app\\cabinet\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,4431)),"D:\\Projects\\autoservice-diploma\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,p=["D:\\Projects\\autoservice-diploma\\src\\app\\cabinet\\page.tsx"],d={require:a,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/cabinet/page",pathname:"/cabinet",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2991:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\Projects\\\\autoservice-diploma\\\\src\\\\app\\\\cabinet\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\Projects\\autoservice-diploma\\src\\app\\cabinet\\page.tsx","default")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},7718:()=>{},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[447,17,658,291],()=>a(2830));module.exports=r})();